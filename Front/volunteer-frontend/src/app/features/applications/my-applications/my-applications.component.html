<h2>Мои заявки</h2>

<mat-progress-spinner *ngIf="loading" mode="indeterminate"></mat-progress-spinner>

<table mat-table [dataSource]="dataSource" *ngIf="!loading && dataSource.length > 0">

  <ng-container matColumnDef="activityName">
    <th mat-header-cell *matHeaderCellDef> Мероприятие </th>
    <td mat-cell *matCellDef="let app"> {{app.activityName}} </td>
  </ng-container>

  <ng-container matColumnDef="submissionDate">
    <th mat-header-cell *matHeaderCellDef> Дата подачи </th>
    <td mat-cell *matCellDef="let app"> {{app.submissionDate | date:'dd MMMM yyyy, HH:mm' }} </td>
  </ng-container>

  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef> Статус </th>
    <td mat-cell *matCellDef="let app">
      <span [style.color]="app.status === 'APPROVED' ? 'green' : app.status === 'REJECTED' ? 'red' : 'orange'">
        {{app.status | statusTranslate}}
      </span>
      <button mat-raised-button color="warn" (click)="delete(app.id)" *ngIf="app.status === 'PENDING'" class="revoke-btn">
        Отозвать заявку
      </button>
    </td>
  </ng-container>

  <ng-container matColumnDef="comment">
    <th mat-header-cell *matHeaderCellDef> Комментарий </th>
    <td mat-cell *matCellDef="let app"> {{app.comment || '—'}} </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<p *ngIf="!loading && dataSource.length === 0">Вы ещё не подали ни одной заявки.</p>