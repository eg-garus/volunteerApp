<div class="page-container">
  <div class="card">
    <h2 class="form-title">
      {{ isEdit ? 'Редактировать задачу' : 'Создать задачу для события' }}
    </h2>

    <mat-progress-spinner *ngIf="loading" mode="indeterminate" class="spinner"></mat-progress-spinner>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <!-- Основная информация -->
      <div class="form-section">
        <h3 class="section-title">Основная информация</h3>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Название задачи</mat-label>
          <input matInput formControlName="name" required>
          <mat-icon matSuffix>task</mat-icon>
          <mat-hint>Короткое и понятное название</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Описание</mat-label>
          <textarea matInput formControlName="description" rows="5"></textarea>
          <mat-icon matSuffix>description</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Дата и время</mat-label>
          <input matInput type="datetime-local" formControlName="date" required>
          <mat-icon matSuffix>event</mat-icon>
        </mat-form-field>
      </div>

      <!-- Требования и уровень -->
      <div class="form-section">
        <h3 class="section-title">Требования</h3>

        <div class="grid-2">
          <mat-form-field appearance="outline">
            <mat-label>Нужно волонтёров</mat-label>
            <input matInput type="number" formControlName="requiredVolunteers" required>
            <mat-icon matSuffix>people</mat-icon>
            <mat-hint>Количество человек</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Уровень сложности</mat-label>
            <input matInput formControlName="level">
            <mat-icon matSuffix>fitness_center</mat-icon>
            <mat-hint>Лёгкий, Средний, Сложный</mat-hint>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Город</mat-label>
          <input matInput formControlName="city" required>
          <mat-icon matSuffix>location_city</mat-icon>
        </mat-form-field>
      </div>

      <!-- Кнопки -->
      <div class="actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid || loading" class="action-btn">
          <mat-icon *ngIf="loading" class="spinner-small">autorenew</mat-icon>
          {{ isEdit ? 'Сохранить изменения' : 'Создать задачу' }}
        </button>
        <button mat-button type="button" (click)="cancel()" [disabled]="loading" class="action-btn">
          Отмена
        </button>
      </div>
    </form>
  </div>
</div>